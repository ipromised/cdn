{"version":3,"sources":["webpack:///./app/components/widgets/Imgcdn.js","webpack:///./app/components/views/Books.js","webpack:///./app/components/containers/BooksContainer.js"],"names":["hoc","cdn","path","p","src","test","QImg","editing","data","getBooks","editBooks","changeField","saveBook","deleteBook","className","length","arr","size","reduce","v","i","push","max","Math","min","key","columns","BookEditor","id","book","Book","idx","m","map","img","title","desc","links","url","href","onClick","e","type","placeholder","value","onChange","field","target","connect","state","books","React","Component","componentDidMount","this","props","render","Books"],"mappings":"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","file":"scripts/books.f5a494c95f3505e1678a.chunk.js","sourcesContent":["import React from \"react\"\n\n\nconst hoc = ({cdn}) => {\n  return ({path, ...p}) => {\n    const src = /^http(s):/.test(path) ? path : cdn + path;\n    return <img src={src} {...p}/>\n  }\n};\n\nexport default hoc;\n\nexport const QImg = hoc({cdn: 'http://demo-1251530551.costj.myqcloud.com'});\n","import React from \"react\"\nimport {QImg} from \"../widgets/Imgcdn\"\n\nexport default ({editing, data, getBooks, editBooks, changeField, saveBook, deleteBook}) => {\n\n  return <main className=\"container\">\n    <h3>总数: {data.length}</h3>\n    <br/>\n    {map(data, 3, editing, getBooks, editBooks, changeField, saveBook, deleteBook)}\n  </main>\n}\n\nfunction map(arr, size = 3, editing = -1, getBooks, editBooks, changeField, saveBook, deleteBook) {\n\n  return arr.reduce((p, v, i) => {\n    if (i % size === 0) {\n      p.push(m(i))\n    }\n    return p;\n  }, []);\n\n  function m(i) {\n    const max = Math.min(arr.length, i + size);\n    const key = i;\n    const columns = [];\n    while (i < max) {\n      if (i === editing) {\n        columns.push(\n          <BookEditor key={arr[i].id || i} book={arr[i]} changeField={changeField}\n                      getBooks={getBooks} saveBook={saveBook} deleteBook={deleteBook}\n          />);\n      } else {\n        columns.push(<Book key={arr[i].id || i} idx={i} book={arr[i]}\n                           getBooks={getBooks} editBooks={editBooks} deleteBook={deleteBook}/>);\n      }\n      i++;\n    }\n    return <div key={key} className=\"columns\">\n      {columns}\n    </div>\n  }\n}\n\nfunction Book({idx, book, getBooks, editBooks, deleteBook}) {\n  return <div className=\"column is-4\">\n    <div className=\"card card-equal-height\">\n      <div className=\"card-image\">\n        <figure className=\"image\">\n          <QImg path={book.img}/>\n        </figure>\n      </div>\n      <div className=\"card-content\">\n\n        <div className=\"content\">\n          <h6>{book.title}</h6>\n          <p>{book.desc}</p>\n          {book.links.map(v => {\n            if (!v.url) {\n              return null;\n            }\n            return <a key={v.url} href={v.url}>{v.title}</a>\n          })}\n\n        </div>\n      </div>\n      <footer className=\"card-footer\">\n        <a className=\"card-footer-item\" onClick={e => editBooks(idx)}>Edit</a>\n        <a className=\"card-footer-item\" onClick={e => deleteBook(book.id, getBooks)}>Delete</a>\n      </footer>\n    </div>\n  </div>\n}\n\nfunction BookEditor({book, changeField, getBooks, saveBook, deleteBook}) {\n\n  return <div className=\"column\">\n    <div className=\"card\">\n      <div className=\"card-image\">\n        <figure className=\"image\">\n          <QImg path={book.img}/>\n          <input className=\"input\" type=\"text\" placeholder=\"图片地址\"\n                 value={book.img}\n                 onChange={\n                   e => changeField({field: 'img', value: e.target.value, type: 'book'})\n                 }/>\n        </figure>\n      </div>\n      <div className=\"card-content\">\n\n        <div className=\"content\">\n          <h6>{book.title}</h6>\n          <input className=\"input\" type=\"text\" placeholder=\"标题\"\n                 value={book.title}\n                 onChange={\n                   e => changeField({field: 'title', value: e.target.value, type: 'book'})\n                 }/>\n          <p>{book.desc}</p>\n          <input className=\"input\" type=\"text\" placeholder=\"描述\"\n                 value={book.desc}\n                 onChange={\n                   e => changeField({field: 'desc', value: e.target.value, type: 'book'})\n                 }/>\n\n          {book.links.map((v, i) => {\n            return <div key={i}>\n              <label className=\"label\">链接</label>\n              <p className=\"control\">\n                <input className=\"input\" type=\"url\" value={v.url}\n                       onChange={e => changeField({field: 'url', value: e.target.value, idx: i, type: 'book'})}/>\n              </p>\n              <label className=\"label\">链接说明</label>\n              <p className=\"control\">\n                <input className=\"input\" type=\"text\" value={v.title}\n                       onChange={e => changeField({field: 'title', value: e.target.value, idx: i, type: 'book'})}/>\n              </p>\n            </div>\n          })}\n\n\n        </div>\n      </div>\n      <footer className=\"card-footer\">\n        <a className=\"card-footer-item\" onClick={saveBook}>Save</a>\n        <a className=\"card-footer-item\" onClick={e => deleteBook(book.id, getBooks)}>Delete</a>\n      </footer>\n    </div>\n  </div>\n}\n","import React from \"react\"\nimport {connect} from \"react-redux\"\nimport {getBooks, saveBook, deleteBook} from \"../../api/markdownApi\"\nimport {editBooks, changeField} from \"../../actions/bookActions\"\nimport Books from \"../views/Books\"\n\n\nclass BooksContainer extends React.Component {\n\n  componentDidMount() {\n    this.props.getBooks();\n  }\n\n  render() {\n    return <Books {...this.props}/>\n  }\n}\n\nexport default connect(state => state.books, {getBooks, editBooks, changeField, saveBook, deleteBook})(BooksContainer);\n"],"sourceRoot":""}