{"version":3,"sources":["webpack:///./app/components/containers/ModelToMarkdownTable.js","webpack:///./app/components/containers/MyBatisSQL.js"],"names":["__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0___default","a","Component","constructor","props","super","this","handlePaste","bind","state","model","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","render","createElement","className","table","e","items","clipboardData","getAsString","setState","aggs","md","forEach","type","field","push","max","reduce","p","v","length","unshift","repeat","split","map","i","padEnd","join","toMarkdownTable","regex","res","agg","exec","aggregate","mapDispatchToProps","pasteLogs","_actions_mybatisActions__WEBPACK_IMPORTED_MODULE_2__","Object","react_redux__WEBPACK_IMPORTED_MODULE_1__","sqlLogs","_objectSpread","logs","style","white-space","dangerouslySetInnerHTML","__html","parsed"],"mappings":"sHAuCAA,EAAA,sBArCmCC,EAAAC,EAAMC,UACvCC,YAAYC,GACVC,MAAMD,GACNE,KAAKC,YAAcD,KAAKC,YAAYC,KAAKF,MACzCA,KAAKG,OAASC,MAAO,IAGvBC,oBACEC,SAASC,iBAAiB,QAASP,KAAKC,aAG1CO,uBACEF,SAASG,oBAAoB,QAAST,KAAKC,aAG7CS,SACE,OAAOhB,EAAAC,EAAAgB,cAAA,QAAMC,UAAU,aACrBlB,EAAAC,EAAAgB,cAAA,WACGX,KAAKG,MAAMU,OAEdnB,EAAAC,EAAAgB,cAAA,WACAjB,EAAAC,EAAAgB,cAAA,WACGX,KAAKG,MAAMC,QAKlBH,YAAYa,GACV,MAAMC,EAAQD,EAAEE,cAAcD,MAC1BA,GACFA,EAAM,GAAGE,YAAYb,IACnBJ,KAAKkB,UAAUd,QAAOS,MAwB9B,SAAyBM,GACvB,MAAMC,KACND,EAAKE,QAAQ,EAAEC,OAAMC,YACjBH,EAAGI,MAAMD,EAAOD,EAAM,GAAI,OAG9B,MAAMG,EAAML,EAAGM,OAAO,CAACC,EAAGC,IAAMA,EAAEF,OAAO,CAACC,EAAGC,IAAMA,EAAEC,OAASF,EAAIC,EAAEC,OAASF,EAAGA,GAAI,GAGpF,OAFAP,EAAGU,QAAQ,IAAIC,OAAO,GAAGC,MAAM,KAC/BZ,EAAGU,SAAS,KAAM,KAAM,OAAQ,OACzBV,EAAGa,IAAI,CAACL,EAAGM,IAAMN,EAAEK,IAAIL,GAAKA,EAAEO,OAAOV,EAAW,IAANS,EAAU,IAAM,MAAME,KAAK,MAAMH,IAAIL,OAASA,MAAMQ,KAAK,MAjCvEC,CASrC,SAAmBjC,GACjB,MAAMkC,EAAQ,+CAEd,IAAIC,EACJ,MAAMC,KACN,KAAOD,EAAMD,EAAMG,KAAKrC,IAAQ,CAC9B,MAAM,CAAGkB,EAAMC,GAASgB,EACxBC,EAAIhB,MACFF,OACAC,UAGJ,OAAOiB,EArB4CE,CAAUtC,+MCC/D,MAMMuC,GACJC,UAAAC,EAAA,GAGFpD,EAAA,QAAeqD,OAAAC,EAAA,QAAAD,CAVS,EAAEE,iVACxBC,IACKD,GAQiCL,EAAxC,eAxCyBjD,EAAAC,EAAMC,UAC7BC,YAAYC,GACVC,MAAMD,GACNE,KAAKC,YAAcD,KAAKC,YAAYC,KAAKF,MAG3CK,oBACEC,SAASC,iBAAiB,QAASP,KAAKC,aAG1CO,uBACEF,SAASG,oBAAoB,QAAST,KAAKC,aAG7CA,YAAYa,GACV,MAAMC,EAAQD,EAAEE,cAAcD,MAC1BA,GACFA,EAAM,GAAGE,YAAYiC,IACnBlD,KAAKF,MAAM8C,UAAUM,KAK3BxC,SACE,OAAOhB,EAAAC,EAAAgB,cAAA,QAAMC,UAAU,aACrBlB,EAAAC,EAAAgB,cAAA,OAAKwC,OAAQC,cAAe,UAAWC,yBAA0BC,OAAQtD,KAAKF,MAAMyD","file":"scripts/mybatis_sql.486031f3707e13658b43.chunk.js","sourcesContent":["import React from \"react\"\n\nclass ModelToMarkdownTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handlePaste = this.handlePaste.bind(this);\n    this.state = {model: ''}\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"paste\", this.handlePaste)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"paste\", this.handlePaste);\n  }\n\n  render() {\n    return <main className=\"container\">\n      <pre>\n        {this.state.table}\n      </pre>\n      <hr/>\n      <pre>\n        {this.state.model}\n      </pre>\n    </main>\n  }\n\n  handlePaste(e) {\n    const items = e.clipboardData.items;\n    if (items) {\n      items[0].getAsString(model => {\n        this.setState({model, table: toMarkdownTable(aggregate(model))})\n      });\n    }\n  }\n}\n\nexport default ModelToMarkdownTable;\n\n\nfunction aggregate(model) {\n  const regex = /(?:private|public)?\\s([A-Z]\\w+) ([a-z]\\w+);/g;\n\n  let res;\n  const agg = [];\n  while (res = regex.exec(model)) {\n    const [, type, field] = res;\n    agg.push({\n      type,\n      field\n    });\n  }\n  return agg;\n}\n\nfunction toMarkdownTable(aggs) {\n  const md = [];\n  aggs.forEach(({type, field}) => {\n      md.push([field, type, '', '']);\n    }\n  );\n  const max = md.reduce((p, v) => v.reduce((p, v) => v.length > p ? v.length : p, p), 8);\n  md.unshift('-'.repeat(4).split(''));\n  md.unshift(['名称', '类型', '是否必填', '说明']);\n  return md.map((v, i) => v.map(v => v.padEnd(max, i === 1 ? '-' : ' ')).join('|')).map(v => `|${v}|`).join('\\n');\n}\n","import React from \"react\"\nimport {connect} from \"react-redux\"\nimport {pasteLogs} from \"../../actions/mybatisActions\"\n\nclass MyBatisSQL extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handlePaste = this.handlePaste.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"paste\", this.handlePaste)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"paste\", this.handlePaste);\n  }\n\n  handlePaste(e) {\n    const items = e.clipboardData.items;\n    if (items) {\n      items[0].getAsString(logs => {\n        this.props.pasteLogs(logs);\n      });\n    }\n  }\n\n  render() {\n    return <main className=\"container\">\n      <pre style={{'white-space': 'normal'}} dangerouslySetInnerHTML={{__html: this.props.parsed}}/>\n    </main>\n  }\n}\n\nconst mapStateToProps = ({sqlLogs}) => {\n  return {\n    ...sqlLogs\n  }\n};\n\nconst mapDispatchToProps = {\n  pasteLogs\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyBatisSQL);\n"],"sourceRoot":""}