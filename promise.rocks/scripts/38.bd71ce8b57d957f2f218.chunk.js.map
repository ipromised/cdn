{"version":3,"sources":["webpack:///./app/components/containers/dynamic/旺仔烧烤.js"],"names":["tabs","menus","Card","menu","num","increment","decrement","idx","className","onClick","data-menu","Col","props","children","Comp","React","Component","constructor","super","this","setTab","bind","state","slice","order","activeTab","componentDidMount","_cp","Clipboard","text","Object","entries","filter","k","v","map","join","componentWillUnmount","destroy","e","setState","currentTarget","dataset","tab","assign","resolveMenus","reduce","p","push","buildMenus","length","Array","from","Math","ceil","_","i","key","render","hidden","data-tab"],"mappings":"2FAAA,+DAIA,MAAMA,EAAO,CAAC,KAAM,MAEdC,EAAQ,CAAC,MAAO,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,MAClE,OAAQ,OAAQ,MAAO,KAAM,WAAY,KAAM,MAAO,MAAO,QAC7D,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,MAC9D,KAAM,MAAO,MAAO,MACpB,OAAQ,MAAO,UAAW,KAAM,KAAM,SAAU,MAAO,KAAM,MAC7D,MAAO,KAAM,KAAM,KAAM,KAAM,OAAQ,KAAM,MAAO,KAAM,QAAS,MACnE,MAAO,MAAO,MAAO,MAAO,MAC5B,MAAO,MAAO,OA8GhB,MAAMC,EAAO,EAAEC,OAAMC,MAAKC,YAAWC,YAAWC,SACvC,yBAAKC,UAAU,QACpB,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,iBACb,uBAAGA,UAAU,cAAcL,GAC3B,uBAAGK,UAAU,iBAAb,UAIJ,yBAAKA,UAAU,0BACb,0BAAMA,UAAU,WAAWC,QAASH,EAAWI,YAAWP,GAAM,uBAAGK,UAAU,uBAAsB,kBAAC,IAAD,OACnG,0BAAMA,UAAU,mBAAmBJ,GACnC,0BAAMI,UAAU,WAAWC,QAASJ,EAAWK,YAAWP,GAAM,uBAAGK,UAAU,sBAAqB,kBAAC,IAAD,OAClG,gCAMFG,EAAOC,GACJ,yBAAKJ,UAAU,eAAeI,EAAMC,UAI9BC,UApIf,cAAmBC,IAAMC,UACvBC,YAAYL,GACVM,MAAMN,GACNO,KAAKC,OAASD,KAAKC,OAAOC,KAAKF,MAC/BA,KAAKd,UAAYc,KAAKd,UAAUgB,KAAKF,MACrCA,KAAKb,UAAYa,KAAKb,UAAUe,KAAKF,MACrCA,KAAKG,MAAQ,CACXrB,MAAOA,EAAMsB,QACbC,MAAO,GACPxB,KAAMA,EAAKuB,QACXE,UAAWzB,EAAK,IAIpB0B,oBACEP,KAAKQ,IAAM,IAAIC,IAAU,cAAe,CACtCC,KAAM,KACJ,MAAM,MAACL,GAASL,KAAKG,MACrB,OAAOQ,OAAOC,QAAQP,GAAOQ,OAAO,EAAEC,EAAGC,KAAOA,EAAI,GAAGC,IAAI,EAAEF,EAAGC,KAAOD,EAAI,KAAOC,GAAGE,KAAK,SAKhGC,uBACElB,KAAKQ,KAAOR,KAAKQ,IAAIW,UAGvBlB,OAAOmB,GACLpB,KAAKqB,SAAS,CAACf,UAAWc,EAAEE,cAAcC,QAAQC,MAGpDtC,UAAUkC,GACR,MAAM,KAACpC,GAAQoC,EAAEE,cAAcC,SACzB,MAAClB,GAASL,KAAKG,MACrBH,KAAKqB,SAAS,CACZhB,MAAOM,OAAOc,OAAO,GAAIpB,EAAO,CAAC,CAACrB,IAAQqB,EAAMrB,IAAS,GAAK,MAIlEG,UAAUiC,GACR,MAAM,KAACpC,GAAQoC,EAAEE,cAAcC,SACzB,MAAClB,GAASL,KAAKG,MAChBE,EAAMrB,IAGXgB,KAAKqB,SAAS,CACZhB,MAAOM,OAAOc,OAAO,GAAIpB,EAAO,CAAC,CAACrB,IAAQqB,EAAMrB,IAAS,GAAK,MAIlE0C,eACE,MAAM,UAACpB,EAAD,MAAYxB,EAAZ,MAAmBuB,GAASL,KAAKG,MACvC,MAAkB,OAAdG,EACKxB,EAEF6B,OAAOC,QAAQP,GAAOsB,OAAO,CAACC,GAAId,EAAGC,KAC7B,IAANA,EAAUa,GAAKA,EAAEC,KAAKf,GAAIc,GAChC,IAGLE,WAAWhD,GACT,IAAKA,EAAMiD,OACT,OAAO,oCAGT,MAAM,MAAC1B,GAASL,KAAKG,MAGrB,OAAO6B,MAAMC,KAAK,CAACF,OAAQG,KAAKC,KAAKrD,EAAMiD,OAF9B,KAGVf,IAAI,CAACoB,EAAGC,IAAMvD,EAAMsB,MAHV,EAGgBiC,EAHhB,GAG2BA,EAAI,KACzCrB,IAAIlC,GACI,yBAAKO,UAAU,WAElBP,EAAMkC,IAAI,CAAChC,EAAMqD,IACR,kBAAC7C,EAAD,CAAK8C,IAAKtD,GACf,kBAACD,EAAD,CAAMK,IAAKiD,EAAGrD,KAAMA,EAAMC,IAAKoB,EAAMrB,IAAS,EAAGE,UAAWc,KAAKd,UAAWC,UAAWa,KAAKb,gBAS1GoD,SACE,MAAM,UAACjC,GAAaN,KAAKG,MACnBrB,EAAQkB,KAAK0B,eACbc,EAAuB,OAAdlC,GAAsBxB,EAAMiD,OAAS,GAAK,SAEzD,OAAO,yBAAK1C,UAAU,aACpB,yBAAKA,UAAU,QACb,4BACGR,EAAKmC,IAAIQ,GACD,wBAAIc,IAAKd,EAAKnC,UAAWiB,IAAckB,EAAM,gBAAkB,MAAOiB,WAAUjB,EAC5ElC,QAASU,KAAKC,QAAQ,2BAAIuB,GAAQ,kBAAC,IAAD,UAInD,4BAAQnC,UAAW,6CAA+CmD,GAAlE,OAA8E,kBAAC,IAAD,OAE5ExC,KAAK8B,WAAWhD","file":"scripts/38.bd71ce8b57d957f2f218.chunk.js","sourcesContent":["import React from \"react\"\nimport Clipboard from 'clipboard'\nimport Ink from 'react-ink'\n\nconst tabs = ['点餐', '已点'];\n\nconst menus = [\"大鸡腿\", \"全翅\", \"翅中\", \"鸡尖\", \"秋刀鱼\", \"大烤肠\", \"肥肠串\", \"五花肉\", \"大热狗\",\n  \"米香鸡块\", \"米香鸡排\", \"大里脊\", \"鸡胗\", \"60克双汇王中王\", \"肥牛\", \"牛板筋\", \"纯肉排\", \"QQ大鸡排\",\n  \"大鱿鱼\", \"鱿鱼须\", \"螺蛳肉\", \"牛肉串\", \"羊肉串\", \"猪脆骨\", \"掌中宝\", \"大鸡柳\", \"贡丸\", \"鱼豆腐\",\n  \"牛肚\", \"排骨串\", \"大肉串\", \"大骨连\",\n  \"奶香馒头\", \"小茄子\", \"肉沫蒜香大茄子\", \"花菜\", \"韭菜\", \"雪榕牌金针菇\", \"娃娃菜\", \"玉米\", \"小青菜\",\n  \"土豆片\", \"香干\", \"素鸡\", \"年糕\", \"藕片\", \"千叶豆腐\", \"香菇\", \"老豆腐\", \"面筋\", \"黄金面包片\", \"南瓜饼\",\n  \"四季豆\", \"臭豆腐\", \"黄金糕\", \"火烧饼\", \"紫薯饼\",\n  \"小热狗\", \"牛蹄筋\", \"油豆腐\"\n];\n\nclass Comp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setTab = this.setTab.bind(this);\n    this.increment = this.increment.bind(this);\n    this.decrement = this.decrement.bind(this);\n    this.state = {\n      menus: menus.slice(),\n      order: {},\n      tabs: tabs.slice(),\n      activeTab: tabs[0]\n    }\n  }\n\n  componentDidMount() {\n    this._cp = new Clipboard('.copy-menus', {\n      text: () => {\n        const {order} = this.state;\n        return Object.entries(order).filter(([k, v]) => v > 0).map(([k, v]) => k + ': ' + v).join('\\n');\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this._cp && this._cp.destroy();\n  }\n\n  setTab(e) {\n    this.setState({activeTab: e.currentTarget.dataset.tab})\n  }\n\n  increment(e) {\n    const {menu} = e.currentTarget.dataset;\n    const {order} = this.state;\n    this.setState({\n      order: Object.assign({}, order, {[menu]: (order[menu] || 0) + 1})\n    })\n  }\n\n  decrement(e) {\n    const {menu} = e.currentTarget.dataset;\n    const {order} = this.state;\n    if (!order[menu]) {\n      return;\n    }\n    this.setState({\n      order: Object.assign({}, order, {[menu]: (order[menu] || 0) - 1})\n    })\n  }\n\n  resolveMenus() {\n    const {activeTab, menus, order} = this.state;\n    if (activeTab === '点餐') {\n      return menus;\n    }\n    return Object.entries(order).reduce((p, [k, v]) => {\n      return v === 0 ? p : (p.push(k), p);\n    }, [])\n  }\n\n  buildMenus(menus) {\n    if (!menus.length) {\n      return <div>无菜单</div>\n    }\n\n    const {order} = this.state;\n    const size = 6;\n\n    return Array.from({length: Math.ceil(menus.length / size)})\n      .map((_, i) => menus.slice(i * size, (i + 1) * size))\n      .map(menus => {\n        return <div className=\"columns\">\n          {\n            menus.map((menu, i) => {\n              return <Col key={menu}>\n                <Card idx={i} menu={menu} num={order[menu] || 0} increment={this.increment} decrement={this.decrement}/>\n              </Col>\n            })\n          }\n        </div>\n      })\n\n  }\n\n  render() {\n    const {activeTab} = this.state;\n    const menus = this.resolveMenus();\n    const hidden = activeTab === '已点' && menus.length ? '' : 'hidden';\n\n    return <div className='container'>\n      <div className=\"tabs\">\n        <ul>\n          {tabs.map(tab => {\n            return <li key={tab} className={activeTab === tab ? \"ink is-active\" : 'ink'} data-tab={tab}\n                       onClick={this.setTab}><a>{tab}</a><Ink/></li>\n          })}\n        </ul>\n      </div>\n      <button className={\"button is-primary is-small copy-menus ink \" + hidden}>复制菜单<Ink/></button>\n      {\n        this.buildMenus(menus)\n      }\n\n    </div>\n  }\n}\n\nconst Card = ({menu, num, increment, decrement, idx}) => {\n  return <div className=\"card\">\n    <div className=\"card-content\">\n      <div className=\"media\">\n        <div className=\"media-content\">\n          <p className=\"title is-6\">{menu}</p>\n          <p className=\"subtitle is-7\">库存:有</p>\n        </div>\n      </div>\n\n      <div className=\"content has-text-right\">\n        <span className=\"icon ink\" onClick={decrement} data-menu={menu}><i className=\"fa fa-minus-square\"/><Ink/></span>\n        <span className='has-text-danger'>{num}</span>\n        <span className=\"icon ink\" onClick={increment} data-menu={menu}><i className=\"fa fa-plus-square\"/><Ink/></span>\n        <br/>\n      </div>\n    </div>\n  </div>\n};\n\nconst Col = (props) => {\n  return <div className=\"column is-2\">{props.children}</div>\n};\n\n\nexport default Comp;\n"],"sourceRoot":""}