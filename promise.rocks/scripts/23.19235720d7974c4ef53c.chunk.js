(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{611:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=(s(636),s(786),s(682)),o=s(10),l=s(21),i=s(635),r=s(632),h=s(600);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach(function(t){p(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.default=class extends c.a.Component{constructor(e){super(e),this.renderRow=this.renderRow.bind(this),this.handleSearch=this.handleSearch.bind(this),["selectStock","addToCollection","setActiveTab","makeChosen"].forEach(e=>this[e]=this[e].bind(this));const t=localStorage.stocks?JSON.parse(localStorage.stocks):[];this.stocks=t,this.state={stocks:t,tabs:["all","chosen"],activeTab:"all",search:"",chosen:localStorage.chosen?JSON.parse(localStorage.chosen):[]}}async componentDidMount(){if(!this.state.stocks.length){const e=await(await Object(i.d)("/stocks")).json();this.stocks=e,this.setState({stocks:e}),localStorage.stocks=JSON.stringify(e)}}handleSearch(e){const{name:t,value:s}=e.target,{activeTab:a,chosen:c}=this.state,n=e=>e.name.includes(s)||e.symbol.includes(s);if("all"===a){const e=s?this.stocks.filter(n):this.stocks;this.setState({[t]:s,stocks:e})}else if("chosen"===a){const e=s?this.makeChosen(c).filter(n):this.makeChosen(c);this.setState({[t]:s,stocks:e})}}makeChosen(e){return this.stocks.filter(t=>e.includes(t.symbol))}setActiveTab(e){const{activeTab:t}=this.state,s=e.target.textContent;t!==s&&this._setTab(s)}_setTab(e){const{chosen:t}=this.state;"all"!==e?"chosen"!==e||this.setState({search:"",activeTab:e,stocks:this.makeChosen(t)}):this.setState({search:"",activeTab:e,stocks:this.stocks})}selectStock(e){const t=this.state.stocks.find(t=>t.symbol===e);this.setState({stock:b({},t,{chosen:this.state.chosen.includes(t.symbol)})})}addToCollection(e){const{symbol:t}=e.target.dataset;let{chosen:s,stocks:a,activeTab:c}=this.state;const n=this.stocks.find(e=>e.symbol===t);if(s.includes(t))return s=s.filter(e=>e!==t),localStorage.chosen=JSON.stringify(s),void this.setState({chosen:s,stocks:"all"===c?a:a.filter(e=>e.symbol!==t)});s=[t,...s],localStorage.chosen=JSON.stringify(s),this.setState({chosen:s,stocks:"all"===c?a:[n,...a]})}renderRow({index:e,key:t,style:s}){const{url:a}=this.props.match,n=this.state.stocks[e];return c.a.createElement(o.NavLink,{key:t,className:"panel-block",activeClassName:"is-active",style:s,to:a+"/"+n.symbol},c.a.createElement("span",{className:"panel-icon"},c.a.createElement("i",{className:"fa fa-book"})),e+1+". "," ",n.name,"(",n.symbol,")")}render(){const{stocks:e,search:t,tabs:s,activeTab:a,chosen:o}=this.state;return c.a.createElement("div",{className:"container unset-max-width"},c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-3",style:{width:"294px"}},c.a.createElement("nav",{className:"panel"},c.a.createElement("p",{className:"panel-heading"},"Stocks"),c.a.createElement("div",{className:"panel-block"},c.a.createElement("p",{className:"control has-icons-left"},c.a.createElement("input",{className:"input is-small",type:"text",placeholder:"search",name:"search",value:t,onChange:this.handleSearch}),c.a.createElement("span",{className:"icon is-small is-left"},c.a.createElement("i",{className:"fa fa-search"})))),c.a.createElement("p",{className:"panel-tabs"},s.map(e=>c.a.createElement("a",{className:e===a?"is-active":void 0,key:e,onClick:this.setActiveTab},e))),c.a.createElement("div",{className:"panel-block"},"点击股票名称试试?"),"chosen"===a||e.length?c.a.createElement(n.d,{style:{outline:"none"},width:270,height:410,rowCount:e.length,rowHeight:41,rowRenderer:this.renderRow}):c.a.createElement("a",{className:"panel-block",style:{justifyContent:"space-around"}}," ",c.a.createElement(r.a,{name:"circle",style:{marginTop:""}})))),c.a.createElement("div",{className:"column is-9"},c.a.createElement(l.d,{exact:!0,path:"/d/Stock/:symbol",render:e=>{const{symbol:t}=e.match.params,s=this.stocks.find(e=>e.symbol===t);return c.a.createElement(h.default,m({},e,this.state,{selectStock:this.selectStock,addToCollection:this.addToCollection,stock:s,chosen:o.includes(s.symbol)}))}}))))}}},786:function(e,t,s){}}]);
//# sourceMappingURL=23.19235720d7974c4ef53c.chunk.js.map