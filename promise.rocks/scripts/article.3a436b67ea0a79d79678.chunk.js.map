{"version":3,"sources":["webpack:///./app/components/views/Article.js","webpack:///./app/components/containers/ArticleContainer.js","webpack:///./app/components/widgets/Spinner.js"],"names":["Article","md","showEdit","counter","react_default","a","createElement","className","style","position","margin","id","dangerouslySetInnerHTML","__html","lib_md","render","content","display","react_router_dom_es","to","parallax","title","document","querySelector","setProperty","body","scrollTop","documentElement","handleScroll","requestAnimationFrame","ArticleContainer_ArticleContainer","Component","componentDidMount","this","props","getMarkdown","match","params","getCounter","window","addEventListener","componentWillUnmount","removeEventListener","componentWillReceiveProps","nextProps","nextState","componentDidUpdate","transform","Spinner","propTypes","prop_types_default","shape","prop_types","modified","instanceOf","Date","isRequired","bool","number","mapDispatchToProps","markdownApi","counterApiInvoker","__webpack_exports__","Object","es","store","markdownState","owner","user","name","react__WEBPACK_IMPORTED_MODULE_0___default","react_spinkit__WEBPACK_IMPORTED_MODULE_1___default","_objectSpread","textAlign","marginTop"],"mappings":"4IAOe,SAASA,GAAQC,GAACA,EAADC,SAAKA,EAALC,QAAeA,IAE7C,OAAOC,EAAAC,EAAAC,cAAA,QAAMC,UAAU,aACrBH,EAAAC,EAAAC,cAAA,WAASC,UAAU,iBACjBH,EAAAC,EAAAC,cAAA,OAAKE,OAAQC,SAAU,SAAUC,OAAQ,UAAWC,GAAG,MAClDC,yBAA0BC,OAAQC,EAAA,EAAUC,OAAOd,EAAGe,SAAW,OACtEZ,EAAAC,EAAAC,cAAA,OAAKE,OAAQS,QAASf,EAAW,QAAU,SACzCE,EAAAC,EAAAC,cAACY,EAAA,MAAKC,GAAI,UAAYlB,EAAGU,GAAIJ,UAAU,qCACnBH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QACZH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,gBAEnCH,EAAAC,EAAAC,cAAA,qECVV,MAGMc,EAAW,KACf,MAAMC,EAAQC,SAASC,cAAc,WACrCF,GAASA,EAAMb,MAAMgB,YAAY,mBALrB,IAK0CF,SAASG,KAAKC,WAAaJ,SAASK,gBAAgBD,aAGtGE,EAAe,KACnBC,sBAAsBT,UAMlBU,UAAyB1B,EAAAC,EAAM0B,UAEnCC,oBACEC,KAAKC,MAAMC,YAAYF,KAAKC,MAAME,MAAMC,OAAO1B,IAAI,GACnDsB,KAAKC,MAAMI,WAAWL,KAAKC,MAAME,MAAMC,OAAO1B,IAC9C4B,OAAOC,iBAAiB,SAAUZ,GAGpCa,uBACEF,OAAOG,oBAAoB,SAAUd,GAGvCe,0BAA0BC,EAAWC,GAE/BZ,KAAKC,MAAME,MAAMC,OAAO1B,KAAOiC,EAAUR,MAAMC,OAAO1B,KACxDsB,KAAKC,MAAMC,YAAYS,EAAUR,MAAMC,OAAO1B,IAAI,GAClDsB,KAAKC,MAAMI,WAAWL,KAAKC,MAAME,MAAMC,OAAO1B,KAIlDmC,qBACExB,SAASD,MAAQY,KAAKC,MAAMjC,GAAGoB,MAC/B,MAAMA,EAAQC,SAASC,cAAc,WAChCF,IAGLA,EAAMb,MAAM,eAAiB,YAC7Ba,EAAMb,MAAMuC,UAAY,qDAG1BhC,SACE,MAAMd,GAACA,GAAMgC,KAAKC,MAElB,OAAKjC,EAAGU,GAGDP,EAAAC,EAAAC,cAACN,EAAYiC,KAAKC,OAFhB9B,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,OAMblB,EAAiBmB,WACfhD,GAAIiD,EAAA7C,EAAU8C,OACVxC,GAAIyC,EAAA,OACJ/B,MAAO+B,EAAA,OACPpC,QAASoC,EAAA,OACTC,SAAUH,EAAA7C,EAAUiD,WAAWC,QAEjCC,WACFtD,SAAUgD,EAAA7C,EAAUoD,KAAKD,WACzBrD,QAAS+C,EAAA7C,EAAUqD,OAAOF,WAC1BrB,YAAaiB,EAAA,KAAKI,WAClBlB,WAAYc,EAAA,KAAKI,YAInB,MASMG,GACJxB,YAAAyB,EAAA,EACAtB,WAAAuB,EAAA,GAGFC,EAAA,QAAeC,OAAAC,EAAA,QAAAD,CAdSE,IACtB,MAAOC,eAAejE,GAACA,GAAjBE,QAAsBA,GAAW8D,EACvC,OACEhE,KACAC,SAAUD,EAAGkE,QAAUF,EAAMG,KAAKzD,GAClCR,QAASA,EAAQF,EAAGU,KAAO,IASSgD,EAAxC,CAA4D7B,mMCtF5DgC,EAAA,KAAiBO,OAAO,eAAgB7D,cAE/B8D,EAAAjE,EAAAC,cAACiE,EAAAlE,GAAQG,wUAAAgE,EAAQC,UAAW,SAAUC,UAAW,OAAUlE,GAAQ6D,KAAMA","file":"scripts/article.3a436b67ea0a79d79678.chunk.js","sourcesContent":["import React from \"react\"\nimport {Link} from \"react-router-dom\"\nimport md_render from \"../../lib/md\"\n\n/**\n * 用来渲染markdown详情\n */\nexport default function Article({md, showEdit, counter}) {\n\n  return <main className=\"container\">\n    <section className=\"markdown-body\">\n      <div style={{position: 'static', margin: '0 auto'}} id=\"out\"\n           dangerouslySetInnerHTML={{__html: md_render.render(md.content || '')}}/>\n      <div style={{display: showEdit ? 'block' : 'none'}}>\n        <Link to={'/write/' + md.id} className=\"button is-primary is-pulled-right\">\n                            <span className=\"icon\">\n                                <i className=\"fa fa-edit\"/>\n                            </span>\n          <span>Edit</span>\n        </Link>\n      </div>\n    </section>\n  </main>\n}\n","import React from \"react\"\nimport {connect} from \"react-redux\"\nimport Article from \"../views/Article\"\nimport {getMarkdown} from \"../../api/markdownApi\"\nimport {getCounter} from \"../../actions/counterApiInvoker\"\nimport Spinner from \"../widgets/Spinner\"\nimport PropTypes, {string, func, date} from 'prop-types'\n\nconst speed = 0.2;\n\n\nconst parallax = () => {\n  const title = document.querySelector('#out>h1');\n  title && title.style.setProperty(\"--scrollparallax\", (document.body.scrollTop || document.documentElement.scrollTop) * speed)\n};\n\nconst handleScroll = () => {\n  requestAnimationFrame(parallax);\n};\n\n/**\n * 文章详情\n */\nclass ArticleContainer extends React.Component {\n\n  componentDidMount() {\n    this.props.getMarkdown(this.props.match.params.id, false);\n    this.props.getCounter(this.props.match.params.id);\n    window.addEventListener('scroll', handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', handleScroll);\n  }\n\n  componentWillReceiveProps(nextProps, nextState) {\n    // 从文章1切换到文章2，变化的只是id\n    if (this.props.match.params.id !== nextProps.match.params.id) {\n      this.props.getMarkdown(nextProps.match.params.id, false);\n      this.props.getCounter(this.props.match.params.id);\n    }\n  }\n\n  componentDidUpdate() {\n    document.title = this.props.md.title;\n    const title = document.querySelector('#out>h1');\n    if (!title) {\n      return;\n    }\n    title.style['will-change'] = 'transform';\n    title.style.transform = 'translateY( calc( var(--scrollparallax) * 1px ) )';\n  }\n\n  render() {\n    const {md} = this.props;\n\n    if (!md.id) {\n      return <Spinner/>\n    }\n    return <Article {...this.props}/>\n  }\n}\n\nArticleContainer.propTypes = {\n  md: PropTypes.shape({\n      id: string,\n      title: string,\n      content: string,\n      modified: PropTypes.instanceOf(Date)\n    },\n  ).isRequired,\n  showEdit: PropTypes.bool.isRequired,\n  counter: PropTypes.number.isRequired,\n  getMarkdown: func.isRequired,\n  getCounter: func.isRequired\n};\n\n\nconst mapStateToProps = store => {\n  const {markdownState: {md}, counter} = store;\n  return {\n    md,\n    showEdit: md.owner === store.user.id,\n    counter: counter[md.id] || 1\n  }\n};\n\nconst mapDispatchToProps = {\n  getMarkdown,\n  getCounter\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArticleContainer);\n\n","import React from \"react\"\nimport Spinner from \"react-spinkit\"\n\n/**\n * 加载条\n */\nexport default ({name = 'three-bounce', style = {}}) => {\n\n  return <Spinner style={{textAlign: 'center', marginTop: '20%', ...style}} name={name}/>\n}\n"],"sourceRoot":""}