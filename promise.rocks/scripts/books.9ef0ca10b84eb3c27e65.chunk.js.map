{"version":3,"sources":["webpack:///./app/components/widgets/Imgcdn.js","webpack:///./app/components/views/Books.js","webpack:///./app/components/containers/BooksContainer.js"],"names":["hoc","cdn","_ref","path","p","_objectWithoutProperties","src","test","react_default","a","createElement","_extends","QImg","editing","data","getBooks","editBooks","changeField","saveBook","deleteBook","className","length","arr","size","reduce","v","i","push","max","Math","min","key","columns","BookEditor","id","book","Book","idx","m","map","img","title","desc","links","url","href","onClick","e","type","placeholder","value","onChange","field","target","__webpack_exports__","Object","es","state","books","markdownApi","bookActions","Component","componentDidMount","this","props","render","Books"],"mappings":"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","file":"scripts/books.9ef0ca10b84eb3c27e65.chunk.js","sourcesContent":["import React from \"react\"\n\n\nconst hoc = ({cdn}) => {\n  return ({path, ...p}) => {\n    const src = /^http(s):/.test(path) ? path : cdn + path;\n    return <img src={src} {...p}/>\n  }\n};\n\nexport default hoc;\n\nexport const QImg = hoc({cdn: 'http://demo-1251530551.costj.myqcloud.com'});\n","import React from \"react\"\nimport {QImg} from \"../widgets/Imgcdn\"\n\nexport default ({editing, data, getBooks, editBooks, changeField, saveBook, deleteBook}) => {\n\n  return <main className=\"container\">\n    <h3>总数: {data.length}</h3>\n    <br/>\n    {map(data, 3, editing, getBooks, editBooks, changeField, saveBook, deleteBook)}\n  </main>\n}\n\nfunction map(arr, size = 3, editing = -1, getBooks, editBooks, changeField, saveBook, deleteBook) {\n\n  return arr.reduce((p, v, i) => {\n    if (i % size === 0) {\n      p.push(m(i))\n    }\n    return p;\n  }, []);\n\n  function m(i) {\n    const max = Math.min(arr.length, i + size);\n    const key = i;\n    const columns = [];\n    while (i < max) {\n      if (i === editing) {\n        columns.push(\n          <BookEditor key={arr[i].id || i} book={arr[i]} changeField={changeField}\n                      getBooks={getBooks} saveBook={saveBook} deleteBook={deleteBook}\n          />);\n      } else {\n        columns.push(<Book key={arr[i].id || i} idx={i} book={arr[i]}\n                           getBooks={getBooks} editBooks={editBooks} deleteBook={deleteBook}/>);\n      }\n      i++;\n    }\n    return <div key={key} className=\"columns\">\n      {columns}\n    </div>\n  }\n}\n\nfunction Book({idx, book, getBooks, editBooks, deleteBook}) {\n  return <div className=\"column is-4\">\n    <div className=\"card card-equal-height\">\n      <div className=\"card-image\">\n        <figure className=\"image\">\n          <QImg path={book.img}/>\n        </figure>\n      </div>\n      <div className=\"card-content\">\n\n        <div className=\"content\">\n          <h6>{book.title}</h6>\n          <p>{book.desc}</p>\n          {book.links.map(v => {\n            if (!v.url) {\n              return null;\n            }\n            return <a key={v.url} href={v.url}>{v.title}</a>\n          })}\n\n        </div>\n      </div>\n      <footer className=\"card-footer\">\n        <a className=\"card-footer-item\" onClick={e => editBooks(idx)}>Edit</a>\n        <a className=\"card-footer-item\" onClick={e => deleteBook(book.id, getBooks)}>Delete</a>\n      </footer>\n    </div>\n  </div>\n}\n\nfunction BookEditor({book, changeField, getBooks, saveBook, deleteBook}) {\n\n  return <div className=\"column\">\n    <div className=\"card\">\n      <div className=\"card-image\">\n        <figure className=\"image\">\n          <QImg path={book.img}/>\n          <input className=\"input\" type=\"text\" placeholder=\"图片地址\"\n                 value={book.img}\n                 onChange={\n                   e => changeField({field: 'img', value: e.target.value, type: 'book'})\n                 }/>\n        </figure>\n      </div>\n      <div className=\"card-content\">\n\n        <div className=\"content\">\n          <h6>{book.title}</h6>\n          <input className=\"input\" type=\"text\" placeholder=\"标题\"\n                 value={book.title}\n                 onChange={\n                   e => changeField({field: 'title', value: e.target.value, type: 'book'})\n                 }/>\n          <p>{book.desc}</p>\n          <input className=\"input\" type=\"text\" placeholder=\"描述\"\n                 value={book.desc}\n                 onChange={\n                   e => changeField({field: 'desc', value: e.target.value, type: 'book'})\n                 }/>\n\n          {book.links.map((v, i) => {\n            return <div key={i}>\n              <label className=\"label\">链接</label>\n              <p className=\"control\">\n                <input className=\"input\" type=\"url\" value={v.url}\n                       onChange={e => changeField({field: 'url', value: e.target.value, idx: i, type: 'book'})}/>\n              </p>\n              <label className=\"label\">链接说明</label>\n              <p className=\"control\">\n                <input className=\"input\" type=\"text\" value={v.title}\n                       onChange={e => changeField({field: 'title', value: e.target.value, idx: i, type: 'book'})}/>\n              </p>\n            </div>\n          })}\n\n\n        </div>\n      </div>\n      <footer className=\"card-footer\">\n        <a className=\"card-footer-item\" onClick={saveBook}>Save</a>\n        <a className=\"card-footer-item\" onClick={e => deleteBook(book.id, getBooks)}>Delete</a>\n      </footer>\n    </div>\n  </div>\n}\n","import React from \"react\"\nimport {connect} from \"react-redux\"\nimport {getBooks, saveBook, deleteBook} from \"../../api/markdownApi\"\nimport {editBooks, changeField} from \"../../actions/bookActions\"\nimport Books from \"../views/Books\"\n\n\nclass BooksContainer extends React.Component {\n\n  componentDidMount() {\n    this.props.getBooks();\n  }\n\n  render() {\n    return <Books {...this.props}/>\n  }\n}\n\nexport default connect(state => state.books, {getBooks, editBooks, changeField, saveBook, deleteBook})(BooksContainer);\n"],"sourceRoot":""}