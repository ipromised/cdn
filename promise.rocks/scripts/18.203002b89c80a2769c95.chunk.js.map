{"version":3,"sources":["webpack:///./app/components/containers/dynamic/Naked.js","webpack:///./app/lib/NakedTable/utils.js","webpack:///./app/lib/NakedTable/Tabs.js","webpack:///./app/lib/NakedTable/THead.js","webpack:///./app/lib/NakedTable/TBody.js","webpack:///./app/lib/NakedTable/TFoot.js","webpack:///./app/lib/NakedTable/PaginationMixin.js","webpack:///./app/lib/NakedTable/Pagination.js","webpack:///./app/lib/NakedTable/NakedTable.js"],"names":["table","fields","name","label","tooltip","format","value","field","row","Math","floor","random","toString","join","age","sortable","height","tabs","pageList","randomData","total","rows","i","push","toFixed","Comp","React","Component","render","data","containerClass","buildRows","fieldNames","fieldsConfig","map","key","ii","fmt","dangerouslySetInnerHTML","__html","Tabs","shouldComponentUpdate","nextProps","this","props","selectedTab","className","tabClass","tabNames","tab","index","onClick","setTab","bind","href","THead","order","length","componentDidMount","initTooltip","window","$","fn","tipsy","getDOMNode","gravity","live","title","getAttribute","html","sortingField","sortingOrder","labelledFields","globallySortable","config","clz","Error","style","sort","TBody","loadingTip","colSpan","require","TFoot","PaginationMixin","jump","action","e","currentTarget","target","setPageSize","buildPageList","onChange","v","page","pageTotal","Pagination","constructor","super","Object","assign","getPageInfo","textAlign","NakedTable","forEach","m","state","_getInitialState","t","handleFormSubmit","ceil","showTabs","loadData","keys","ajax","tableClass","getRows","footer","showPagination","form","addEventListener","preventDefault","fetchByPage","doSort","setState","sortOnLoad","a","b","a1","b1","reverse","inputVal","size","getParams","params","s","reduce","p","pageSize","slice"],"mappings":"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","file":"scripts/18.203002b89c80a2769c95.chunk.js","sourcesContent":["import React from \"react\";\nimport NakedTable from \"../../../lib/NakedTable/NakedTable\";\n\n\nconst table = {\n  fields: {\n    name: {\n      label: \"名称\",\n      tooltip: \"名称名称<span style='color:crimson'>名称名称</span>\",\n      format(value, field, row) {\n        return ['<span style=\"color:#', Math.floor(Math.random() * 16777215).toString(16), '\">', value, '</span>'].join(\"\");\n      }\n    },\n    age: {\n      label: \"年龄\",\n      sortable: true//this column is sortable\n    },\n    height: {\n      label: \"体重\",\n      sortable: true\n    }\n  },\n  tabs: [\n    {label: \"tab1\", fields: [\"name\", \"age\", \"height\"]},\n    {label: \"tab2\", fields: [\"name\", \"height\"]}\n  ],\n  pageList: [5, 7]\n};\n\nfunction randomData(total) {//generate random data\n  total = total || ~~(Math.random() * 100);\n  const rows = [];\n  for (let i = total; i > 0; i--) {\n    rows.push({\n      name: \"id_\" + Math.random(),\n      age: ~~(Math.random() * 100),\n      height: (Math.random() * 100).toFixed(2)\n    });\n  }\n  return {total: total, rows: rows};\n}\n\n\nclass Comp extends React.Component {\n\n  render() {\n    return <NakedTable data={randomData(15)} table={table} containerClass='naked container'/>\n  }\n}\n\nexport default Comp;\n","'use strict';\nimport React from \"react\";\n\n\n/**\n * html structure:\n * <tr>\n *     <td>text one</td>\n *     <td>text one</td>\n *     <td>text one</td>\n *     ...\n * </tr>\n * ...\n */\nexport default function buildRows(rows, fieldNames, fieldsConfig) {\n  return rows.map((row, i) => {\n    return <tr key={i}>{\n      fieldNames.map((field, ii) => {\n        var value = row['_' + field];//cache\n        if (value == null) {\n          value = row[field];\n          var fmt = fieldsConfig[field].format;\n          if (fmt) {\n            value = fmt(value, field, row);\n          }\n          row['_' + field] = value || '';\n        }\n        return <td key={ii} dangerouslySetInnerHTML={{__html: value}}/>\n      })}\n    </tr>;\n  })\n};\n","'use strict';\nimport React from \"react\";\n\n/**\n * Default Tabs component\n */\nclass Tabs extends React.Component {\n\n  /**\n   * only update when selectedTab changes\n   */\n  shouldComponentUpdate(nextProps) {\n    return this.props.selectedTab !== nextProps.selectedTab;\n  }\n\n  /**\n   * html structure:\n   * <ul>\n   *     <li class=\"active\"><a href=\"javascript:void(0)\">tab one</a></li>\n   *     <li><a href=\"javascript:void(0)\">tab two</a></li>\n   *     ...\n   * </ul>\n   */\n  render() {\n\n    return <ul className={this.props.tabClass}>{\n      this.props.tabNames.map(function (tab, index) {\n        var props = {key: index};\n        if (this.props.selectedTab === index) {\n          props.className = 'active';\n        } else {\n          props.onClick = this.props.setTab.bind(this, index);\n        }\n        return <li {...props}>\n          <a href='javascript:void(0);'>{tab}</a>\n        </li>\n      }, this)\n    }\n    </ul>\n  }\n};\n\nexport default Tabs;\n","'use strict';\nimport React from \"react\";\n\n/**\n * THead component\n */\nclass THead extends React.Component {\n\n  /**\n   * Only update when selectedTab or order changes\n   */\n  shouldComponentUpdate(nextProps) {\n    return this.props.selectedTab !== nextProps.selectedTab\n      || this.props.order !== nextProps.order\n      || this.props.fields.length !== nextProps.fields.length\n  }\n\n  componentDidMount() {\n    this.initTooltip();\n  }\n\n  /**\n   * add tooltip\n   */\n  initTooltip() {\n    if (window.$ && $.fn.tipsy) {\n      $(this.getDOMNode()).tipsy({\n        gravity: 's',\n        live: '.naked-tooltip',\n        title: function () {\n          return this.getAttribute('data-tip');\n        },\n        html: true\n      });\n    }\n  }\n\n  /**\n   * html structure:\n   * <thead>\n   *     <tr>\n   *         <th>label one</th>\n   *         <th>label two</th>\n   *         <th>label three</th>\n   *         ...\n   *     </tr>\n   * </thead>\n   */\n  render() {\n    const sortingField = this.props.field,\n      sortingOrder = this.props.order,\n      fields = this.props.fields,\n      fieldsConfig = this.props.table.fields || this.props.labelledFields,\n      globallySortable = this.props.table.sortable;\n    return <thead>\n    <tr>{\n      fields.map(function (field, index) {\n        const config = fieldsConfig[field],\n          clz = sortingField === field ? sortingOrder : '';\n        if (!config) {\n          throw Error('field:' + field + ' not in fields list -> ', fields);\n        }\n        const props = {\n          key: index,\n          style: config.style,\n          className: 'naked-tooltip ' + clz,\n          'data-tip': config.tooltip || config.label\n        };\n        if (config.sortable || (globallySortable && config.sortable !== false)) {\n          props.className += ' sortable';\n          props.onClick = this.props.sort.bind(this, field);\n        }\n        return <th {...props}>{fieldsConfig[field].label}</th>\n      }, this)\n    }\n    </tr>\n    </thead>;\n  }\n}\n\nexport default THead;\n","'use strict';\nimport React from \"react\";\n\nimport buildRows from \"./utils\";\n\n/**\n * Default tbody component\n *\n * html structure:\n * <tbody>\n *     <tr>\n *         <td>text one</td>\n *         <td>text one</td>\n *         <td>text one</td>\n *         ...\n *     </tr>\n *     ...\n * </tbody>\n */\nclass TBody extends React.Component {\n  render() {\n\n    const {fields, fieldsConfig, labelledFields, rows, loadingTip} = this.props;\n\n    if (rows && rows.length) {\n      return <tbody>{buildRows(rows, fields, fieldsConfig || labelledFields)}</tbody>;\n    }\n    return <tbody>\n    <tr>\n      <td colSpan={fields.length}>{loadingTip}</td>\n    </tr>\n    </tbody>;\n\n  }\n}\n\nexport default TBody;\n","'use strict';\nimport React from \"react\";\n\nvar buildRows = require(\"./utils\").buildRows;\n\n/**\n * Default tfoot component\n */\nclass TFoot extends React.Component {\n\n  /**\n   * only update when selectedTab changes\n   */\n  shouldComponentUpdate(nextProps) {\n    return this.props.selectedTab !== nextProps.selectedTab;\n  }\n\n  /**\n   * html structure:\n   * <tfoot>\n   *     <tr>\n   *         <td>text one</td>\n   *         <td>text one</td>\n   *         <td>text one</td>\n   *         ...\n   *     </tr>\n   *     ...\n   * </tfoot>\n   */\n  render() {\n\n    const {rows} = this.props;\n    if (rows && rows.length) {\n      return <tfoot>{buildRows(rows, this.props.fields, this.props.table.fields || this.props.labelledFields)}</tfoot>;\n    }\n    return null;\n  }\n}\n\nexport default TFoot;\n","'use strict';\nimport React from \"react\";\n\n/**\n * Pagination utilities\n */\nconst PaginationMixin = {\n\n  /**\n   * jump to g given page\n   * @param action Possible values:start/prev/next/end/jump\n   * @param e Event triggered by an input change\n   */\n  jump: function (action, e) {\n    if (e.currentTarget.className !== 'disabled') {\n      this.props.jump(action, e.target.value);\n    }\n  },\n\n  /**\n   * set row count per page\n   * @param e\n   */\n  setPageSize: function (e) {\n    this.props.setPageSize(e.target.value);\n  },\n\n  /**\n   * page size options\n   *\n   * html structure:\n   * <select>\n   *     <option>5</option>\n   *     <option>10</option>\n   *     <option>15</option>\n   * </select>\n   *\n   * @returns {XML}\n   */\n  buildPageList: function () {\n    return <select onChange={this.setPageSize}>{\n      this.props.pageList.map(function (v, i) {\n        return <option>{v}</option>\n      })}\n    </select>\n  },\n\n  /**\n   * only update when pageNo changes\n   */\n  shouldComponentUpdate: function (nextProps) {\n    return this.props.page !== nextProps.page || this.props.pageTotal !== nextProps.pageTotal;\n  }\n};\n\nexport default PaginationMixin;\n","'use strict';\nimport React from \"react\";\n\nimport PaginationMixin from './PaginationMixin';\n\n/**\n * Default pagination component\n */\nclass Pagination extends React.Component {\n\n  constructor(props) {\n    super(props);\n    Object.assign(this, PaginationMixin);\n  }\n\n  getPageInfo() {\n    return this.props.page + '/' + this.props.pageTotal;\n  }\n\n  /**\n   * html structure:\n   * <ul>\n   *     <li>上一页</li>\n   *     <li>1/5</li>\n   *     <li>下一页</li>\n   * </li>\n   *\n   * @returns {XML}\n   */\n  render() {\n\n    return <div style={{textAlign: 'right'}}>\n      <ul className='nt-pagination'>\n        <li onClick={this.jump.bind(this, 'prev')} className={this.props.page === 1 ? 'disabled' : null}>\n          <a href='javascript:void 0'>上一页</a>\n        </li>\n        <li>\n          {this.getPageInfo()}\n        </li>\n        <li onClick={this.jump.bind(this, 'next')}\n            className={this.props.page === this.props.pageTotal ? 'disabled' : null}>\n          <a href='javascript:void 0'>下一页 </a>\n        </li>\n      </ul>\n    </div>\n  }\n};\n\nexport default Pagination;\n","'use strict';\nimport React from \"react\";\n\nimport Tabs from './Tabs';\nimport THead from './THead';\nimport TBody from './TBody';\nimport TFoot from './TFoot';\nimport Pagination from './Pagination';\nimport './naked.css'\n\nclass NakedTable extends React.Component {\n  constructor(props) {\n    super(props);\n    ['setTab', 'sort', 'jump', 'setPageSize'].forEach(m => this[m] = this[m].bind(this));\n    this.state = this._getInitialState();\n  }\n\n  static defaultProps = {\n\n    Tabs, //Tabs component\n    THead, // THead component\n    TBody, // TBody component\n    TFoot, //TFoot component\n    Pagination, //Pagination component\n\n    containerClass: 'naked', // ClassName of this component\n    tabClass: 'nt-nav', // ClassName of Tabs component\n    tableClass: 'nt-table', // ClassName of table element\n    loadingTip: 'Loading ...', // Loading tip\n\n    tabNames: null,// Allow alternative tab names\n    selectedTab: 0, // Index of the active tab\n    form: null, // Used to provide extra params, optional\n    fetchByPage: false, // Whether fetch data by page\n    showPagination: true, // if false , Pagination component will be hidden\n    data: {total: 0, rows: []}, // Default data\n    order: null, // Sort in which order. Possible values: asc/desc\n    field: null, // Sort by which field\n    loadData: null,// used to load data\n  }\n\n  _getInitialState() {\n    const {table, data} = this.props;\n    const tabNames = this.props.tabNames || table.tabs.map(t => t.label);\n    const pageList = table.pageList || [10];//10 rows per page by default\n\n    this.handleFormSubmit();\n\n    return {\n      data: data, // Table data\n      selectedTab: this.props.selectedTab, // Default tab\n      page: 1, // Default pageNo\n      rows: table.pageList[0], // Row count per page\n      pageTotal: Math.ceil(data.total / table.pageList[0]), // Page count\n      order: this.props.order,\n      field: this.props.field,\n      tabClass: table.tabClass || this.props.tabClass,\n      showTabs: tabNames && tabNames.length > 1,\n      loadData: table.loadData || this.props.loadData,\n      tabNames,\n      pageList,\n    }\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {table, data} = props;\n    let labelledFields = table.fields;\n    let {fields} = table.tabs[props.selectedTab] || {}; // fields to display\n    if (!fields && data.rows.length) {\n      fields = Object.keys(data.rows[0]);\n      labelledFields = fields.map(v => ({[v]: {label: v}}));\n    }\n    return Object.assign({}, state, {\n      data,\n      fields: fields || [],\n      labelledFields: labelledFields || [],\n      pageTotal: Math.ceil(data.total / state.pageList[0]), // Page count\n    })\n  }\n\n  componentDidMount() {\n    this.ajax();\n  }\n\n  render() {\n    const {showTabs, tabClass, tabNames, fields, labelledFields, pageList, pageTotal} = this.state;\n    const {table} = this.props;\n\n    return <div className={this.props.containerClass}>\n      {showTabs && (<this.props.Tabs tabClass={tabClass} tabNames={tabNames}\n                                     selectedTab={this.state.selectedTab} setTab={this.setTab} table={table}/>)}\n      <table className={this.props.tableClass}>\n\n        <this.props.THead fields={fields} table={this.props.table} labelledFields={labelledFields}\n                          field={this.state.field}\n                          order={this.state.order} sort={this.sort} selectedTab={this.state.selectedTab}/>\n\n        <this.props.TBody fields={fields} fieldsConfig={this.props.table.fields} labelledFields={labelledFields}\n                          rows={this.getRows()}/>\n\n        <this.props.TFoot fields={fields} fieldsConfig={this.props.table.fields} labelledFields={labelledFields}\n                          rows={this.state.data.footer} selectedTab={this.state.selectedTab}/>\n\n      </table>\n      {this.props.showPagination && (\n        <this.props.Pagination pageList={pageList} total={this.state.data.total} page={this.state.page}\n                               pageTotal={pageTotal} jump={this.jump} setPageSize={this.setPageSize}/>)}\n    </div>\n  }\n\n\n  /**\n   * Reload table data on form submit\n   */\n  handleFormSubmit() {\n    if (!this.props.form) {\n      return;\n    }\n    this.props.form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      this.ajax(1);// 1 : page reset\n    });\n  }\n\n  /**\n   * Sort table rows on th click\n   * @param field The field to sort by\n   * @param e event triggered by clicking th.sortable\n   */\n  sort(field, e) {\n    var rows = this.state.data.rows;\n    if (!rows) {\n      return;\n    }\n    this.state.field = field;\n    this.state.order = this.state.order === 'desc' ? 'asc' : 'desc';//reversed order\n\n    // Server side sort\n    if (this.props.fetchByPage) {\n      this.ajax();\n      return;\n    }\n\n    this.doSort(rows, field, this.state.order);\n\n    this.setState({\n      data: {rows: rows, total: rows.length, footer: this.state.data.footer}\n    });\n  }\n\n  /**\n   * Sort table rows on data load\n   * @param rows\n   */\n  sortOnLoad(rows) {\n    if (rows && rows.length) {\n      const {order, field} = this.state;\n      if (!order || !field) {\n        return;\n      }\n      this.doSort(rows, field, order);\n    }\n  }\n\n  /**\n   * Sort rows by field in a given order\n   * @param rows data to be sorted\n   * @param field\n   * @param order\n   */\n  doSort(rows, field, order) {\n    //todo for a derived field, value may be unavailable\n    rows.sort((a, b) => {//从小到大排列\n      const a1 = a[field],\n        b1 = b[field];\n      return a1 === b1 ? 0 : (a1 > b1 ? 1 : -1);\n    });\n    if (order === 'desc') {\n      rows.reverse();\n    }\n  }\n\n  /**\n   * Based on action , jump to a given page\n   * @param action\n   * @param inputVal\n   */\n  jump(action, inputVal) {\n    let {page, pageTotal: total} = this.state;\n\n    switch (action) {\n      case 'end':\n        page = total;\n        break;\n      case 'prev':\n        page--;\n        break;\n      case 'next':\n        page++;\n        break;\n      case 'jump':\n        page = +inputVal || 1;\n        break;\n      default:\n        page = 1;\n    }\n    if (page > total) {\n      page = total;\n    } else if (page < 1) {\n      page = 1;\n    }\n    page !== this.state.page && this.ajax(page);\n  }\n\n  /**\n   * Set row count per page\n   */\n  setPageSize(size) {\n    // Reload data from server\n    if (this.props.fetchByPage) {\n      this.ajax(1, size);\n      return;\n    }\n    this.setState({\n      rows: size,\n      page: 1,\n      pageTotal: Math.ceil(this.state.data.total / size || 1)\n    });\n\n  }\n\n  /**\n   * Select a tab\n   */\n  setTab(selectedTab) {\n    const fields = this.props.table.tabs[selectedTab].fields;\n    this.setState({selectedTab: selectedTab, fields});\n  }\n\n  /**\n   * Request parmas\n   * @param page pageNo\n   * @param rows pageSize\n   */\n  getParams(page, rows) {\n    return {//传向服务端的参数\n      page: page || this.state.page,\n      rows: rows || this.state.rows,\n      field: this.state.field,\n      order: this.state.order\n    };\n  }\n\n  /**\n   * Load data locally or remotely, depending on this.props.fetchByPage\n   * @param page pageNo\n   * @param rows pageSize\n   */\n  ajax(page, rows) {\n    if (!this.props.fetchByPage && page) {//数据全量获取\n      this.setState({page: page});\n      return;\n    }\n    const params = this.getParams(page, rows);\n    this.state.loadData && this.state.loadData(params, (data) => {\n      const s = {};\n      if (data.total < 1) {\n        s.loadingTip = '没有数据可展示';\n      }\n      s.data = data;\n\n      this.sortOnLoad(data.rows);\n\n      if (!this.state.fields.length) {// 没有配置fields. 根据返回的数据动态获取\n        if (data.rows.length) {\n          s.fields = Object.keys(data.rows[0]);\n          s.labelledFields = s.fields.reduce((p, v) => {\n            p[v] = {label: v};\n            return p;\n          }, {});\n        }\n      }\n\n\n      this.setState({\n        page: this.props.fetchByPage ? params.page : 1,\n        pageTotal: Math.ceil(data.total / this.state.rows || 1),\n        ...s,\n      });\n    });\n  }\n\n  /**\n   * Rows for current page\n   */\n  getRows() {\n    const page = this.state.page,\n      pageSize = this.state.rows,\n      rows = this.state.data.rows;\n    if (this.props.fetchByPage) {\n      return rows;\n    }\n    return rows.slice((page - 1) * pageSize, page * pageSize);\n  }\n}\n\nexport default NakedTable;\n"],"sourceRoot":""}