{"version":3,"sources":["webpack:///./app/components/views/LicaiForm.js","webpack:///./app/components/containers/LicaiFormContainer.js"],"names":["Input","type","name","model","onChange","other","e","target","value","DateInput","focused","handleFocus","className","onClick","stopPropagation","onFocus","width","height","selected","Date","keyboardSupport","onSelect","date","props","detail","handleSubmit","handleBlur","inputChanged","onSubmit","required","min","step","to","mapDispatchToProps","licaiDetail","saveLicai","connect","state","React","Component","constructor","super","this","bind","componentDidMount","match","params","id","setState","preventDefault","history","push","render","LicaiForm"],"mappings":"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","file":"scripts/licai_form.5b63836e3eb6eba6c460.chunk.js","sourcesContent":["import React from \"react\"\nimport {Link} from \"react-router-dom\"\nimport InfiniteCalendar from \"react-infinite-calendar\"\nimport date from \"../../lib/date\"\n\nconst Input = ({type = 'text', name, model = {}, onChange, ...other}) => {\n  return <input type={type} name={name} onChange={e => onChange({[e.target.name]: e.target.value})}\n                value={model[name] || ''} {...other}/>\n};\n\n/**\n *\n * @param field\n * @param focused 获得焦点的元素的name\n * @param handleFocus\n * @returns {XML}\n * @constructor\n */\nconst DateInput = function ({name, model, focused, handleFocus, onChange}) {\n\n  return <div className='control' onClick={(e) => {\n    // 点击该组件时,不触发操作,点击外部时,隐藏此组件\n    e.stopPropagation();\n  }\n  }>\n    <Input className=\"input\" type=\"date\" name={name} model={model} onFocus={e => {\n      e.stopPropagation();\n      handleFocus(e.target.name)\n    }\n    }\n\n    />\n    {\n      name === focused && <InfiniteCalendar\n        width={400}\n        height={600}\n        selected={model[name] ? new Date(model[name]) : new Date()}\n        keyboardSupport={true}\n        onSelect={e => {\n          onChange({[name]: date(e)});\n        }}\n      />\n    }\n  </div>\n};\n\n\nexport default (props) => {\n\n  const {detail, handleSubmit, handleFocus, handleBlur, inputChanged: onChange, focused} = props;\n\n  // 点击时,隐藏日期组件\n  return <div onClick={handleBlur}>\n    <form onSubmit={handleSubmit}>\n      <div className=\"field\">\n        <label className=\"label\">app名称</label>\n        <div className=\"control\">\n          <Input className=\"input\" name=\"app\" required model={detail} onChange={onChange}/>\n        </div>\n      </div>\n\n      <div className=\"field\">\n        <label className=\"label\">产品名称</label>\n        <div className=\"control\">\n          <Input className=\"input\" name=\"product\" required model={detail} onChange={onChange}/>\n        </div>\n      </div>\n      <div className=\"field\">\n        <label className=\"label\">预计收益</label>\n        <div className=\"control\">\n          <Input className=\"input\" name=\"profit\" type=\"number\" min=\"0\" step=\"0.01\" model={detail} onChange={onChange}/>\n        </div>\n      </div>\n      <div className=\"field\">\n        <label className=\"label\">投资金额</label>\n        <div className=\"control\">\n          <Input className=\"input\" type=\"number\" name=\"investment\" required min=\"0\" step=\"0.01\" model={detail}\n                 onChange={onChange}/>\n        </div>\n      </div>\n      <div className=\"field\">\n        <label className=\"label\">开始日期</label>\n        <DateInput name=\"start\" focused={focused} handleFocus={handleFocus} handleBlur={handleBlur} model={detail}\n                   onChange={onChange}/>\n      </div>\n      <div className=\"field\">\n        <label className=\"label\">结束日期</label>\n        <DateInput name=\"end\" focused={focused} handleFocus={handleFocus} handleBlur={handleBlur} model={detail}\n                   onChange={onChange}/>\n      </div>\n      <div className=\"field\">\n        <label className=\"label\">到账时间</label>\n        <DateInput name=\"due\" focused={focused} handleFocus={handleFocus} handleBlur={handleBlur} model={detail}\n                   onChange={onChange}/>\n      </div>\n      <div className=\"field\">\n        <label className=\"label\">7日年化收益</label>\n        <div className=\"control\">\n          <Input className=\"input\" type=\"number\" name=\"ratio\" min=\"0\" step=\"0.01\" model={detail} onChange={onChange}/>\n        </div>\n      </div>\n      <div className=\"field\">\n        <div className=\"control\">\n          <button className=\"button is-primary\">Submit</button>\n          <Link className=\"button is-link\" to=\"/licai\">Cancel</Link>\n        </div>\n      </div>\n    </form>\n  </div>\n}\n","import React from \"react\"\nimport {connect} from \"react-redux\"\nimport LicaiForm from \"../views/LicaiForm\"\nimport {licaiDetail, saveLicai} from \"../../api/markdownApi\"\nimport {inputChanged} from \"../../actions/licaiActions\"\n\nclass LicaiFormContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      focused: null,// 获得焦点的输入框\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleBlur = this.handleFocus.bind(this, null);\n    this.handleFocus = this.handleFocus.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.id) {\n      this.props.licaiDetail(this.props.match.params.id);\n    }\n  }\n\n  handleFocus(name) {\n    this.setState({focused: name});\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.props.saveLicai(() => {// 保存完成后跳转到理财列表页\n      this.props.history.push('/finance');\n    });\n  }\n\n  render() {\n\n    return <main className=\"container\">\n\n      <LicaiForm {...this.props}\n                 focused={this.state.focused}\n                 handleSubmit={this.handleSubmit}\n                 handleFocus={this.handleFocus}\n                 handleBlur={this.handleBlur}\n      />\n    </main>\n  }\n}\n\nconst mapStateToProps = state => {\n\n  return {\n    detail: state.licaiDetail\n  }\n};\n\nconst mapDispatchToProps = {\n  licaiDetail,\n  saveLicai,\n  inputChanged\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LicaiFormContainer);\n"],"sourceRoot":""}