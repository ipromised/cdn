{"version":3,"sources":["webpack:///./app/components/containers/dynamic/es/tables.js","webpack:///./app/api/es.js","webpack:///./app/components/containers/dynamic/es.js","webpack:///./app/lib/NakedTable/utils.js","webpack:///./app/lib/NakedTable/Tabs.js","webpack:///./app/lib/NakedTable/THead.js","webpack:///./app/lib/NakedTable/TBody.js","webpack:///./app/lib/NakedTable/TFoot.js","webpack:///./app/lib/NakedTable/PaginationMixin.js","webpack:///./app/lib/NakedTable/Pagination.js","webpack:///./app/lib/NakedTable/NakedTable.js"],"names":["auto","tabs","pageList","mysql","fields","table_schema","label","table_name","sortable","column_name","column_type","history","host","created","pathname","url","headers","token","localStorage","es_token","match_all","query","Indices","React","Component","constructor","props","super","this","getMapping","bind","state","indices","message","res","async","fetch","method","json","setState","ok","e","target","tagName","preventDefault","href","getAttribute","push","render","child","NakedTable","data","rows","total","length","table","containerClass","onClick","index","format","value","field","row","status","health","Types","types","load","componentDidUpdate","prev","cur","match","params","mappings","Object","keys","map","v","key","to","TypeRecords","loadData","page","size","order","cb","type","body","JSON","stringify","search","from","console","warn","hits","_source","tables","fetchByPage","Comp","className","path","component","buildRows","fieldNames","fieldsConfig","i","ii","fmt","dangerouslySetInnerHTML","__html","Tabs","shouldComponentUpdate","nextProps","selectedTab","tabClass","tabNames","tab","setTab","THead","componentDidMount","initTooltip","window","$","fn","tipsy","getDOMNode","gravity","live","title","html","sortingField","sortingOrder","labelledFields","globallySortable","config","clz","Error","style","tooltip","sort","TBody","loadingTip","colSpan","require","TFoot","PaginationMixin","jump","action","currentTarget","setPageSize","buildPageList","onChange","pageTotal","Pagination","assign","getPageInfo","textAlign","forEach","m","_getInitialState","t","handleFormSubmit","Math","ceil","showTabs","ajax","tableClass","getRows","footer","showPagination","form","addEventListener","doSort","sortOnLoad","a","b","a1","b1","reverse","inputVal","getParams","s","reduce","p","pageSize","slice"],"mappings":"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","file":"scripts/17.88dd5ee437aa8e3eb5b7.chunk.js","sourcesContent":["export const auto = {// 自动生成fields\n  tabs: [],\n  pageList: [5, 7]\n};\n\nexport const mysql = {\n  fields: {\n    table_schema: {\n      label: \"schema\",\n    },\n    table_name: {\n      label: \"table\",\n      sortable: true//this column is sortable\n    },\n    column_name: {\n      label: \"column\",\n      sortable: true\n    },\n    column_type: {\n      label: 'type'\n    }\n  },\n  tabs: [\n    {label: \"tab1\", fields: ['table_schema', 'table_name', 'column_name', 'column_type']},\n  ],\n  pageList: [5, 7]\n};\n\nexport const history = {\n  fields: {\n    host: {\n      label: \"host\",\n    },\n    created: {\n      label: \"created\",\n      sortable: true,\n    },\n    pathname: {\n      label: \"path\"\n    }\n  },\n  tabs: [\n    {label: \"tab1\", fields: ['host', 'pathname', 'created']},\n  ],\n  pageList: [5, 7]\n};\n\n\nexport default {\n  mysql,\n  history,\n  auto\n}\n","/**\n api for elasticsearch\n */\n\n\n// es base path\nconst url = '/logically/es';\n\nconst headers = (token) => {\n  return {\n    token: token || localStorage.es_token\n  }\n};\n\nconst match_all = {\n  query: {\n    match_all: {}\n  }\n};\n\nasync function db(data) {\n  /**\n   * 索引数据库数据\n   * select table_schema,table_name,column_name,is_nullable,column_type,column_comment,\n   * character_set_name,collation_name from information_schema.`columns`\n   * where table_schema='yej_server_db_160606';\n   */\n  const res = await fetch(url + '/db/mysql', {method: 'POST', headers, body: JSON.stringify(data)});\n  const json = await res.json();\n  console.log(res, json);\n}\n\nasync function db_search(data) {\n  const res = await fetch(url + '/db/mysql/_search?q=' + encodeURIComponent(data), {headers});\n  const json = await res.json();\n  console.log(json.hits.hits.map(v => v._source));\n}\n\nasync function truncate(indxOrType = '/not/exists') {\n  /**\n   * 清空index或type\n   */\n  const res = await fetch(url + indxOrType + '/_delete_by_query', {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(match_all)\n  });\n  const json = await res.json();\n  console.log(res, json);\n}\n\nexport async function search(index, body = match_all) {\n  const res = await fetch(url + index + '/_search', {\n    method: 'POST',\n    headers: headers(),\n    body: JSON.stringify(body)\n  });\n  return await res.json();\n}\n\nexport async function indices() {\n  const res = await fetch(url + '/_cat/indices?format=json', {\n    method: 'GET',\n    headers: headers()\n  });\n  return await res.json();\n}\n\nexport async function mappings(index = '') {\n  const res = await fetch(url + index + '/_mapping', {\n    method: 'GET',\n    headers: headers()\n  });\n  return await res.json();\n}\n","import React from \"react\";\nimport {search, indices, mappings} from '../../../api/es';\nimport tables from './es/tables';\nimport NakedTable from \"../../../lib/NakedTable/NakedTable\";\nimport {Route, Link} from \"react-router-dom\"\n\nclass Comp extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {match} = this.props;\n    return <div className=\"container\">\n      <Indices match={this.props.match} history={this.props.history}/>\n      <Route path={match.url + '/:index'} render={props => <Types {...props}/>}/>\n      <Route path={match.url + '/:index/:type'} component={TypeRecords}/>\n    </div>\n  }\n}\n\n/**\n * 索引列表\n */\nclass Indices extends React.Component {\n  constructor(props) {\n    super(props);\n    this.getMapping = this.getMapping.bind(this);\n    this.state = {\n      indices: [],\n      message: ''\n    }\n  }\n\n  static table = {\n    fields: {\n      index: {\n        label: \"index\",\n        format(value, field, row) {\n          return `<a href='${value}'>${value}</a>`\n        }\n      },\n      'docs.count': {\n        label: \"doc_count\",\n        sortable: true//this column is sortable\n      },\n      'store.size': {\n        label: \"size\",\n        sortable: true\n      },\n      status: {\n        label: 'status'\n      },\n      health: {\n        label: 'health'\n      },\n    },\n    tabs: [\n      {label: \"tab1\", fields: ['index', 'docs.count', 'store.size', 'status', 'health']},\n    ],\n    pageList: [10, 10],\n  }\n\n  async componentDidMount() {\n    const res = await indices();\n\n    this.setState(res.ok === false ? {message: res.message} : {\n      indices: res,\n      message: '',\n    });\n  }\n\n  getMapping(e) {\n    if (e.target.tagName === 'A') {\n      e.preventDefault();\n      const href = e.target.getAttribute('href');\n      return this.props.history.push('/d/es/' + href);\n    }\n  }\n\n  render() {\n    const {indices, message} = this.state;\n    const child = message ? message :\n      <NakedTable data={{rows: indices, total: indices.length}} table={Indices.table} containerClass='naked'/>;\n    return <section onClick={this.getMapping}>\n      {child}\n    </section>\n  }\n}\n\nclass Types extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      types: [],\n      message: ''\n    }\n  }\n\n  async componentDidMount() {\n    this.load();\n  }\n\n  componentDidUpdate() {\n    const {index: prev} = this.state;\n    const {index: cur} = this.props.match.params;\n    if (prev !== cur) {\n      this.load();\n    }\n  }\n\n  async load() {\n    const {index} = this.props.match.params;\n    const res = await mappings('/' + index);\n    this.setState(res.ok === false ? {message: res.message} : {\n      types: Object.keys(res[index].mappings),\n      index,\n      message: ''\n    });\n  }\n\n  render() {\n    if (this.state.message) {\n      return '';\n    }\n    return <ul>\n      {\n        this.state.types.map(v => {\n          return <li key={v}>\n            <Link to={this.props.match.url + '/' + v}>{v}</Link>\n          </li>\n        })\n      }\n    </ul>\n  }\n}\n\nclass TypeRecords extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.loadData = this.loadData.bind(this);\n  }\n\n  async loadData({page, rows: size, field, order}, cb) {// 数据异步加载\n    const {index, type} = this.props.match.params;\n    const res = await search(`/${index}/${type}`, {\n      from: page - 1,\n      size,\n      query: {match_all: {}}\n    });\n    if (res.ok === false) {\n      console.warn(res);\n      return;\n    }\n    const rows = res.hits.hits.map(v => v._source);\n    cb({\n      total: res.hits.total,\n      rows,\n    });\n  }\n\n  render() {\n    const table = tables[this.props.match.params.type] || tables.auto;\n    return <NakedTable data={{rows: [], total: 0}} table={table} loadData={this.loadData}\n                       containerClass='naked' fetchByPage={true}/>\n  }\n\n}\n\nexport default Comp;\n","'use strict';\nimport React from \"react\";\n\n\n/**\n * html structure:\n * <tr>\n *     <td>text one</td>\n *     <td>text one</td>\n *     <td>text one</td>\n *     ...\n * </tr>\n * ...\n */\nexport default function buildRows(rows, fieldNames, fieldsConfig) {\n  return rows.map((row, i) => {\n    return <tr key={i}>{\n      fieldNames.map((field, ii) => {\n        var value = row['_' + field];//cache\n        if (value == null) {\n          value = row[field];\n          var fmt = fieldsConfig[field].format;\n          if (fmt) {\n            value = fmt(value, field, row);\n          }\n          row['_' + field] = value || '';\n        }\n        return <td key={ii} dangerouslySetInnerHTML={{__html: value}}/>\n      })}\n    </tr>;\n  })\n};\n","'use strict';\nimport React from \"react\";\n\n/**\n * Default Tabs component\n */\nclass Tabs extends React.Component {\n\n  /**\n   * only update when selectedTab changes\n   */\n  shouldComponentUpdate(nextProps) {\n    return this.props.selectedTab !== nextProps.selectedTab;\n  }\n\n  /**\n   * html structure:\n   * <ul>\n   *     <li class=\"active\"><a href=\"javascript:void(0)\">tab one</a></li>\n   *     <li><a href=\"javascript:void(0)\">tab two</a></li>\n   *     ...\n   * </ul>\n   */\n  render() {\n\n    return <ul className={this.props.tabClass}>{\n      this.props.tabNames.map(function (tab, index) {\n        var props = {key: index};\n        if (this.props.selectedTab === index) {\n          props.className = 'active';\n        } else {\n          props.onClick = this.props.setTab.bind(this, index);\n        }\n        return <li {...props}>\n          <a href='javascript:void(0);'>{tab}</a>\n        </li>\n      }, this)\n    }\n    </ul>\n  }\n};\n\nexport default Tabs;\n","'use strict';\nimport React from \"react\";\n\n/**\n * THead component\n */\nclass THead extends React.Component {\n\n  /**\n   * Only update when selectedTab or order changes\n   */\n  shouldComponentUpdate(nextProps) {\n    return this.props.selectedTab !== nextProps.selectedTab\n      || this.props.order !== nextProps.order\n      || this.props.fields.length !== nextProps.fields.length\n  }\n\n  componentDidMount() {\n    this.initTooltip();\n  }\n\n  /**\n   * add tooltip\n   */\n  initTooltip() {\n    if (window.$ && $.fn.tipsy) {\n      $(this.getDOMNode()).tipsy({\n        gravity: 's',\n        live: '.naked-tooltip',\n        title: function () {\n          return this.getAttribute('data-tip');\n        },\n        html: true\n      });\n    }\n  }\n\n  /**\n   * html structure:\n   * <thead>\n   *     <tr>\n   *         <th>label one</th>\n   *         <th>label two</th>\n   *         <th>label three</th>\n   *         ...\n   *     </tr>\n   * </thead>\n   */\n  render() {\n    const sortingField = this.props.field,\n      sortingOrder = this.props.order,\n      fields = this.props.fields,\n      fieldsConfig = this.props.table.fields || this.props.labelledFields,\n      globallySortable = this.props.table.sortable;\n    return <thead>\n    <tr>{\n      fields.map(function (field, index) {\n        const config = fieldsConfig[field],\n          clz = sortingField === field ? sortingOrder : '';\n        if (!config) {\n          throw Error('field:' + field + ' not in fields list -> ', fields);\n        }\n        const props = {\n          key: index,\n          style: config.style,\n          className: 'naked-tooltip ' + clz,\n          'data-tip': config.tooltip || config.label\n        };\n        if (config.sortable || (globallySortable && config.sortable !== false)) {\n          props.className += ' sortable';\n          props.onClick = this.props.sort.bind(this, field);\n        }\n        return <th {...props}>{fieldsConfig[field].label}</th>\n      }, this)\n    }\n    </tr>\n    </thead>;\n  }\n}\n\nexport default THead;\n","'use strict';\nimport React from \"react\";\n\nimport buildRows from \"./utils\";\n\n/**\n * Default tbody component\n *\n * html structure:\n * <tbody>\n *     <tr>\n *         <td>text one</td>\n *         <td>text one</td>\n *         <td>text one</td>\n *         ...\n *     </tr>\n *     ...\n * </tbody>\n */\nclass TBody extends React.Component {\n  render() {\n\n    const {fields, fieldsConfig, labelledFields, rows, loadingTip} = this.props;\n\n    if (rows && rows.length) {\n      return <tbody>{buildRows(rows, fields, fieldsConfig || labelledFields)}</tbody>;\n    }\n    return <tbody>\n    <tr>\n      <td colSpan={fields.length}>{loadingTip}</td>\n    </tr>\n    </tbody>;\n\n  }\n}\n\nexport default TBody;\n","'use strict';\nimport React from \"react\";\n\nvar buildRows = require(\"./utils\").buildRows;\n\n/**\n * Default tfoot component\n */\nclass TFoot extends React.Component {\n\n  /**\n   * only update when selectedTab changes\n   */\n  shouldComponentUpdate(nextProps) {\n    return this.props.selectedTab !== nextProps.selectedTab;\n  }\n\n  /**\n   * html structure:\n   * <tfoot>\n   *     <tr>\n   *         <td>text one</td>\n   *         <td>text one</td>\n   *         <td>text one</td>\n   *         ...\n   *     </tr>\n   *     ...\n   * </tfoot>\n   */\n  render() {\n\n    const {rows} = this.props;\n    if (rows && rows.length) {\n      return <tfoot>{buildRows(rows, this.props.fields, this.props.table.fields || this.props.labelledFields)}</tfoot>;\n    }\n    return null;\n  }\n}\n\nexport default TFoot;\n","'use strict';\nimport React from \"react\";\n\n/**\n * Pagination utilities\n */\nconst PaginationMixin = {\n\n  /**\n   * jump to g given page\n   * @param action Possible values:start/prev/next/end/jump\n   * @param e Event triggered by an input change\n   */\n  jump: function (action, e) {\n    if (e.currentTarget.className !== 'disabled') {\n      this.props.jump(action, e.target.value);\n    }\n  },\n\n  /**\n   * set row count per page\n   * @param e\n   */\n  setPageSize: function (e) {\n    this.props.setPageSize(e.target.value);\n  },\n\n  /**\n   * page size options\n   *\n   * html structure:\n   * <select>\n   *     <option>5</option>\n   *     <option>10</option>\n   *     <option>15</option>\n   * </select>\n   *\n   * @returns {XML}\n   */\n  buildPageList: function () {\n    return <select onChange={this.setPageSize}>{\n      this.props.pageList.map(function (v, i) {\n        return <option>{v}</option>\n      })}\n    </select>\n  },\n\n  /**\n   * only update when pageNo changes\n   */\n  shouldComponentUpdate: function (nextProps) {\n    return this.props.page !== nextProps.page || this.props.pageTotal !== nextProps.pageTotal;\n  }\n};\n\nexport default PaginationMixin;\n","'use strict';\nimport React from \"react\";\n\nimport PaginationMixin from './PaginationMixin';\n\n/**\n * Default pagination component\n */\nclass Pagination extends React.Component {\n\n  constructor(props) {\n    super(props);\n    Object.assign(this, PaginationMixin);\n  }\n\n  getPageInfo() {\n    return this.props.page + '/' + this.props.pageTotal;\n  }\n\n  /**\n   * html structure:\n   * <ul>\n   *     <li>上一页</li>\n   *     <li>1/5</li>\n   *     <li>下一页</li>\n   * </li>\n   *\n   * @returns {XML}\n   */\n  render() {\n\n    return <div style={{textAlign: 'right'}}>\n      <ul className='nt-pagination'>\n        <li onClick={this.jump.bind(this, 'prev')} className={this.props.page === 1 ? 'disabled' : null}>\n          <a href='javascript:void 0'>上一页</a>\n        </li>\n        <li>\n          {this.getPageInfo()}\n        </li>\n        <li onClick={this.jump.bind(this, 'next')}\n            className={this.props.page === this.props.pageTotal ? 'disabled' : null}>\n          <a href='javascript:void 0'>下一页 </a>\n        </li>\n      </ul>\n    </div>\n  }\n};\n\nexport default Pagination;\n","'use strict';\nimport React from \"react\";\n\nimport Tabs from './Tabs';\nimport THead from './THead';\nimport TBody from './TBody';\nimport TFoot from './TFoot';\nimport Pagination from './Pagination';\nimport './naked.css'\n\nclass NakedTable extends React.Component {\n  constructor(props) {\n    super(props);\n    ['setTab', 'sort', 'jump', 'setPageSize'].forEach(m => this[m] = this[m].bind(this));\n    this.state = this._getInitialState();\n  }\n\n  static defaultProps = {\n\n    Tabs, //Tabs component\n    THead, // THead component\n    TBody, // TBody component\n    TFoot, //TFoot component\n    Pagination, //Pagination component\n\n    containerClass: 'naked', // ClassName of this component\n    tabClass: 'nt-nav', // ClassName of Tabs component\n    tableClass: 'nt-table', // ClassName of table element\n    loadingTip: 'Loading ...', // Loading tip\n\n    tabNames: null,// Allow alternative tab names\n    selectedTab: 0, // Index of the active tab\n    form: null, // Used to provide extra params, optional\n    fetchByPage: false, // Whether fetch data by page\n    showPagination: true, // if false , Pagination component will be hidden\n    data: {total: 0, rows: []}, // Default data\n    order: null, // Sort in which order. Possible values: asc/desc\n    field: null, // Sort by which field\n    loadData: null,// used to load data\n  }\n\n  _getInitialState() {\n    const {table, data} = this.props;\n    const tabNames = this.props.tabNames || table.tabs.map(t => t.label);\n    const pageList = table.pageList || [10];//10 rows per page by default\n\n    this.handleFormSubmit();\n\n    return {\n      data: data, // Table data\n      selectedTab: this.props.selectedTab, // Default tab\n      page: 1, // Default pageNo\n      rows: table.pageList[0], // Row count per page\n      pageTotal: Math.ceil(data.total / table.pageList[0]), // Page count\n      order: this.props.order,\n      field: this.props.field,\n      tabClass: table.tabClass || this.props.tabClass,\n      showTabs: tabNames && tabNames.length > 1,\n      loadData: table.loadData || this.props.loadData,\n      tabNames,\n      pageList,\n    }\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {table, data} = props;\n    let labelledFields = table.fields;\n    let {fields} = table.tabs[props.selectedTab] || {}; // fields to display\n    if (!fields && data.rows.length) {\n      fields = Object.keys(data.rows[0]);\n      labelledFields = fields.map(v => ({[v]: {label: v}}));\n    }\n    return Object.assign({}, state, {\n      data,\n      fields: fields || [],\n      labelledFields: labelledFields || [],\n      pageTotal: Math.ceil(data.total / state.pageList[0]), // Page count\n    })\n  }\n\n  componentDidMount() {\n    this.ajax();\n  }\n\n  render() {\n    const {showTabs, tabClass, tabNames, fields, labelledFields, pageList, pageTotal} = this.state;\n    const {table} = this.props;\n\n    return <div className={this.props.containerClass}>\n      {showTabs && (<this.props.Tabs tabClass={tabClass} tabNames={tabNames}\n                                     selectedTab={this.state.selectedTab} setTab={this.setTab} table={table}/>)}\n      <table className={this.props.tableClass}>\n\n        <this.props.THead fields={fields} table={this.props.table} labelledFields={labelledFields}\n                          field={this.state.field}\n                          order={this.state.order} sort={this.sort} selectedTab={this.state.selectedTab}/>\n\n        <this.props.TBody fields={fields} fieldsConfig={this.props.table.fields} labelledFields={labelledFields}\n                          rows={this.getRows()}/>\n\n        <this.props.TFoot fields={fields} fieldsConfig={this.props.table.fields} labelledFields={labelledFields}\n                          rows={this.state.data.footer} selectedTab={this.state.selectedTab}/>\n\n      </table>\n      {this.props.showPagination && (\n        <this.props.Pagination pageList={pageList} total={this.state.data.total} page={this.state.page}\n                               pageTotal={pageTotal} jump={this.jump} setPageSize={this.setPageSize}/>)}\n    </div>\n  }\n\n\n  /**\n   * Reload table data on form submit\n   */\n  handleFormSubmit() {\n    if (!this.props.form) {\n      return;\n    }\n    this.props.form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      this.ajax(1);// 1 : page reset\n    });\n  }\n\n  /**\n   * Sort table rows on th click\n   * @param field The field to sort by\n   * @param e event triggered by clicking th.sortable\n   */\n  sort(field, e) {\n    var rows = this.state.data.rows;\n    if (!rows) {\n      return;\n    }\n    this.state.field = field;\n    this.state.order = this.state.order === 'desc' ? 'asc' : 'desc';//reversed order\n\n    // Server side sort\n    if (this.props.fetchByPage) {\n      this.ajax();\n      return;\n    }\n\n    this.doSort(rows, field, this.state.order);\n\n    this.setState({\n      data: {rows: rows, total: rows.length, footer: this.state.data.footer}\n    });\n  }\n\n  /**\n   * Sort table rows on data load\n   * @param rows\n   */\n  sortOnLoad(rows) {\n    if (rows && rows.length) {\n      const {order, field} = this.state;\n      if (!order || !field) {\n        return;\n      }\n      this.doSort(rows, field, order);\n    }\n  }\n\n  /**\n   * Sort rows by field in a given order\n   * @param rows data to be sorted\n   * @param field\n   * @param order\n   */\n  doSort(rows, field, order) {\n    //todo for a derived field, value may be unavailable\n    rows.sort((a, b) => {//从小到大排列\n      const a1 = a[field],\n        b1 = b[field];\n      return a1 === b1 ? 0 : (a1 > b1 ? 1 : -1);\n    });\n    if (order === 'desc') {\n      rows.reverse();\n    }\n  }\n\n  /**\n   * Based on action , jump to a given page\n   * @param action\n   * @param inputVal\n   */\n  jump(action, inputVal) {\n    let {page, pageTotal: total} = this.state;\n\n    switch (action) {\n      case 'end':\n        page = total;\n        break;\n      case 'prev':\n        page--;\n        break;\n      case 'next':\n        page++;\n        break;\n      case 'jump':\n        page = +inputVal || 1;\n        break;\n      default:\n        page = 1;\n    }\n    if (page > total) {\n      page = total;\n    } else if (page < 1) {\n      page = 1;\n    }\n    page !== this.state.page && this.ajax(page);\n  }\n\n  /**\n   * Set row count per page\n   */\n  setPageSize(size) {\n    // Reload data from server\n    if (this.props.fetchByPage) {\n      this.ajax(1, size);\n      return;\n    }\n    this.setState({\n      rows: size,\n      page: 1,\n      pageTotal: Math.ceil(this.state.data.total / size || 1)\n    });\n\n  }\n\n  /**\n   * Select a tab\n   */\n  setTab(selectedTab) {\n    const fields = this.props.table.tabs[selectedTab].fields;\n    this.setState({selectedTab: selectedTab, fields});\n  }\n\n  /**\n   * Request parmas\n   * @param page pageNo\n   * @param rows pageSize\n   */\n  getParams(page, rows) {\n    return {//传向服务端的参数\n      page: page || this.state.page,\n      rows: rows || this.state.rows,\n      field: this.state.field,\n      order: this.state.order\n    };\n  }\n\n  /**\n   * Load data locally or remotely, depending on this.props.fetchByPage\n   * @param page pageNo\n   * @param rows pageSize\n   */\n  ajax(page, rows) {\n    if (!this.props.fetchByPage && page) {//数据全量获取\n      this.setState({page: page});\n      return;\n    }\n    const params = this.getParams(page, rows);\n    this.state.loadData && this.state.loadData(params, (data) => {\n      const s = {};\n      if (data.total < 1) {\n        s.loadingTip = '没有数据可展示';\n      }\n      s.data = data;\n\n      this.sortOnLoad(data.rows);\n\n      if (!this.state.fields.length) {// 没有配置fields. 根据返回的数据动态获取\n        if (data.rows.length) {\n          s.fields = Object.keys(data.rows[0]);\n          s.labelledFields = s.fields.reduce((p, v) => {\n            p[v] = {label: v};\n            return p;\n          }, {});\n        }\n      }\n\n\n      this.setState({\n        page: this.props.fetchByPage ? params.page : 1,\n        pageTotal: Math.ceil(data.total / this.state.rows || 1),\n        ...s,\n      });\n    });\n  }\n\n  /**\n   * Rows for current page\n   */\n  getRows() {\n    const page = this.state.page,\n      pageSize = this.state.rows,\n      rows = this.state.data.rows;\n    if (this.props.fetchByPage) {\n      return rows;\n    }\n    return rows.slice((page - 1) * pageSize, page * pageSize);\n  }\n}\n\nexport default NakedTable;\n"],"sourceRoot":""}